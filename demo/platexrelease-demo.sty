\NeedsTeXFormat{pLaTeX2e}[2016/04/17]
\ProvidesPackage{platexrelease-demo}
                [2016/11/03 v0.1 platexrelase demo for texconf16]
\@ifpackageloaded{platexrelease}{%
  \PackageError{platexrelease-demo}{%
    Don't load `platexrelease' package by yourself}\@ehc
}{}
\DeclareOption*{\PassOptionsToPackage{\CurrentOption}{platexrelease}}
\ProcessOptions\relax
\RequirePackage{platexrelease}

\newcommand{\showversion}{[\pfmtversion]\par}
%%%%% import from platexrelease.sty
%
%% File: plfonts.dtx
%  * \g@tlastchart@
%  * \pltx@isletter
%  * \@text@composite
%  * \@text@composite@x
%  * \eminnershape
%% File: plcore.dtx
%  * \@makecol
%  * \@outputtombow
%  * \AtBeginDvi
%  * \@iiiparbox
%  * \underline
%
%% the commands below are for demonstration only, since the old (--2012)
%% behavior depends on the old behavior of pTeX but the typeset is done
%% by the new (e-)pTeX
%
%% Remove extra \xkanjiskip around footnote mark
\plIncludeInRelease{2016/04/17}{\@makefnmark}{For demonstration only!}
\renewcommand\@makefnmark{%
  \ifydir \hbox{}\hbox{\@textsuperscript{\normalfont\@thefnmark}}\hbox{}%
  \else\hbox{\yoko\@textsuperscript{\normalfont\@thefnmark}}\fi}
\plEndIncludeInRelease
\plIncludeInRelease{2013/01/01}{\@makefnmark}{For demonstration only!}
\renewcommand\@makefnmark{\hbox{%
  \ifydir \@textsuperscript{\normalfont\@thefnmark}%
  \else\hbox{\yoko\@textsuperscript{\normalfont\@thefnmark}}\fi}}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@makefnmark}{For demonstration only!}
\renewcommand\@makefnmark{%
  \ifydir \hbox{}\hbox{\@textsuperscript{\normalfont\@thefnmark}}\hbox{}%
  \else\hbox{\yoko\@textsuperscript{\normalfont\@thefnmark}}\fi}
\plEndIncludeInRelease
%% Remove extra \xkanjiskip around tabular environment
\plIncludeInRelease{2016/04/17}{\@tabular}{For demonstration only!}
\def\@tabular{\leavevmode \null\hbox \bgroup $\let\@acol\@tabacol
   \let\@classz\@tabclassz
   \let\@classiv\@tabclassiv \let\\\@tabularcr\@tabarray}
\plEndIncludeInRelease
\plIncludeInRelease{2013/01/01}{\@tabular}{For demonstration only!}
\def\@tabular{\leavevmode \hbox \bgroup $\let\@acol\@tabacol
   \let\@classz\@tabclassz
   \let\@classiv\@tabclassiv \let\\\@tabularcr\@tabarray}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@tabular}{For demonstration only!}
\def\@tabular{\leavevmode \null\hbox \bgroup $\let\@acol\@tabacol
   \let\@classz\@tabclassz
   \let\@classiv\@tabclassiv \let\\\@tabularcr\@tabarray}
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\endtabular}{For demonstration only!}
\def\endtabular{\crcr\egroup\egroup $\egroup\null}
\expandafter \let \csname endtabular*\endcsname = \endtabular
\plEndIncludeInRelease
\plIncludeInRelease{2013/01/01}{\endtabular}{For demonstration only!}
\def\endtabular{\crcr\egroup\egroup $\egroup}
\expandafter \let \csname endtabular*\endcsname = \endtabular
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\endtabular}{For demonstration only!}
\def\endtabular{\crcr\egroup\egroup $\egroup\null}
\expandafter \let \csname endtabular*\endcsname = \endtabular
\plEndIncludeInRelease
%
%% based on kinsoku.tex (not added to official platexrelease.sty,
%% for fear of overriding user settings)
%
\plIncludeInRelease{2016/05/08}{\xspcode}{For demonstration only!}
\@tempcnta="80
\loop\ifnum\@tempcnta<\@cclvi
  \xspcode\@tempcnta=3
  \advance\@tempcnta\@ne
\repeat
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\xspcode}{For demonstration only!}
\@tempcnta="80
\loop\ifnum\@tempcnta<\@cclvi
  \xspcode\@tempcnta=0
  \advance\@tempcnta\@ne
\repeat
\plEndIncludeInRelease
%
%% based on ascmac.sty
%
\RequirePackage{ascmac}
\plIncludeInRelease{2016/04/17}{\@keytop}{For demonstration only!}
\def\@keytop[#1]#2{%
  {\setbox0=\hbox{\shortstack{#2}}%
  \ybaselineshift\z@ \tbaselineshift\z@
  \dimen0=\wd0\advance\dimen0 5pt\dimen1=\dp0\advance\dimen1 2.5pt%
  \setbox\scscb@x=\hbox to\dimen0{%
  \iftdir\tate\else\yoko\fi
  \@scw\wd0\hfil\vtop{\offinterlineskip
  \thinlines\setlength{\unitlength}{1pt}\hrule\kern2.3pt\@hobox{tl}{tr}5%
  \kern-2.4pt\box0\@hobox{bl}{br}5\kern-.4pt\hrule}\hfil}%
  \dimen0=\dp\scscb@x\advance\dimen0 -.4pt
  \setbox0=\vbox{\hbox{\hbox to.2pt{\vtop to\dimen0{\@vrf@{2.3pt}{.4pt}}\hss}%
  \box\scscb@x\hbox to.2pt{\hss\vtop to\dimen0{\@vrf@{2.3pt}{.4pt}}}}}%
  \if #1c\mbox{}$\vcenter{\box0}$\mbox{}\else
  \if #1t\else\if #1b\boxmaxdepth=0pt\else
  \boxmaxdepth=\dimen1\fi\fi \mbox{}\vbox{\box0}\fi}}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@keytop}{For demonstration only!}
\def\@keytop[#1]#2{\tbaselineshift\z@
  {\setbox0=\hbox{\shortstack{#2}}%
  \dimen0=\wd0\advance\dimen0 5pt\dimen1=\dp0\advance\dimen1 2.5pt%
  \setbox\scscb@x=\hbox to\dimen0{%
  \iftdir\tate\else\yoko\fi
  \@scw\wd0\hfil\vtop{\offinterlineskip
  \thinlines\setlength{\unitlength}{1pt}\hrule\kern2.3pt\@hobox{tl}{tr}5%
  \kern-2.4pt\box0\@hobox{bl}{br}5\kern-.25pt\hrule}\hfil}\dimen0=\dp\scscb@x%
  \setbox0=\vbox{\hbox{\hbox to0pt{\hss\vtop to\dimen0{\@vrf@{2.5pt}{.4pt}}}%
  \box\scscb@x\hbox to.2pt{\hss\vtop to\dimen0{\@vrf@{2.5pt}{.4pt}}}}}%
  \if #1c $\vcenter{\box0}$ \else \if #1t\else\if #1b\boxmaxdepth=0pt\else
  \boxmaxdepth=\dimen1\fi\fi \mbox{}\vbox{\box0}\fi}}
\plEndIncludeInRelease



%% all done

\endinput
